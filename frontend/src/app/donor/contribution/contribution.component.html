<div class="contribution-bg">
  <div class="overlay"></div>

  <div class="contribution-card">
    <h2>Donate to Request</h2>

    <!-- NGO Request Info (Read-only) -->
    <div *ngIf="request" class="request-info-section">
      <h3>NGO Request Details</h3>
      <div class="info-row">
        <strong>NGO Name:</strong>
        <span>{{ request.ngo_name || 'N/A' }}</span>
      </div>
      <div class="info-row">
        <strong>NGO Address:</strong>
        <span>{{ request.ngo_address || 'Not provided' }}</span>
      </div>
      <div class="info-row">
        <strong>Donation Type:</strong>
        <span>{{ request.donation_type || 'N/A' }}</span>
      </div>
      <div class="info-row">
        <strong>Required Quantity/Amount:</strong>
        <span>{{ request.quantity_or_amount || 'N/A' }}</span>
      </div>
      <div class="info-row" *ngIf="request.description">
        <strong>Description:</strong>
        <span>{{ request.description }}</span>
      </div>
      <div *ngIf="isFundsType()" class="bank-details-section" style="margin-top: 16px; padding: 16px; background: #F5F5F5; border-radius: 8px; border: 1px solid #E0E0E0;">
        <h4 style="margin-top: 0; margin-bottom: 12px;">
          üè¶ Bank Account Details for Transfer
        </h4>
        <div class="info-row" *ngIf="request.bank_account_number">
          <strong>Account Number:</strong>
          <span>{{ request.bank_account_number }}</span>
        </div>
        <div class="info-row" *ngIf="request.bank_name">
          <strong>Bank Name:</strong>
          <span>{{ request.bank_name }}</span>
        </div>
        <div class="info-row" *ngIf="request.ifsc_code">
          <strong>IFSC Code:</strong>
          <span>{{ request.ifsc_code }}</span>
        </div>
        <div class="info-row" *ngIf="request.account_holder_name">
          <strong>Account Holder Name:</strong>
          <span>{{ request.account_holder_name }}</span>
        </div>
        <p style="margin-top: 12px; margin-bottom: 0; color: #666; font-size: 14px; font-style: italic;">
          Please transfer the funds directly to the above bank account.
        </p>
      </div>
    </div>

    <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>
    <form (ngSubmit)="submitContribution()" class="donation-form">
      <h3>Your Donation Details</h3>
      <div *ngIf="isFundsType()" class="info-message" style="padding: 12px; background: #E3F2FD; border-left: 4px solid #2196F3; margin-bottom: 16px; border-radius: 4px;">
        <strong>üí° Note:</strong> For FUNDS donations, you will transfer money directly to the NGO's bank account shown above. No pickup is required.
      </div>
      <div *ngIf="requiresPickup()" class="info-message" style="padding: 12px; background: #FFF3E0; border-left: 4px solid #FF9800; margin-bottom: 16px; border-radius: 4px;">
        <strong>üí° Note:</strong> Please provide pickup location, date, and time so the NGO can collect your donation.
      </div>

      <div class="form-group">
        <label>Quantity/Amount You Want to Donate *</label>
        <input 
          type="number" 
          placeholder="Enter quantity or amount"
          [(ngModel)]="quantityOrAmount"
          name="quantityOrAmount"
          min="0.01"
          step="0.01"
          [disabled]="isLoading"
          required />
      </div>
      <div *ngIf="requiresPickup()">
        <div class="form-group">
          <label>Pickup Location *</label>
          <input 
            type="text" 
            placeholder="Enter your pickup address"
            [(ngModel)]="pickupLocation"
            name="pickupLocation"
            [disabled]="isLoading"
            required />
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Pickup Date *</label>
            <input 
              type="date" 
              [(ngModel)]="pickupDate"
              name="pickupDate"
              [disabled]="isLoading"
              required />
          </div>

          <div class="form-group">
            <label>Pickup Time *</label>
            <input 
              type="time" 
              [(ngModel)]="pickupTime"
              name="pickupTime"
              [disabled]="isLoading"
              required />
          </div>
        </div>
      </div>

      <div class="form-group">
        <label>Notes (Optional)</label>
        <textarea 
          placeholder="Any additional information for the NGO"
          [(ngModel)]="notes"
          name="notes"
          [disabled]="isLoading"
          rows="4"></textarea>
      </div>

      <button 
        type="submit"
        [disabled]="isLoading"
        class="btn-submit">
        {{ isLoading ? 'Submitting...' : 'Submit Donation' }}
      </button>
    </form>
  </div>
</div>
